<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Evaluation- MEttLE</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/stylesheets/vendor/bootstrap.min.css">
  <link rel="stylesheet" href="/stylesheets/custom/migrated.css">
  <link rel="stylesheet" type="text/css" href="/stylesheets/css/style.css">
    <link rel="stylesheet" href="/stylesheets/css/style-2.css">
  <!-- <link rel="stylesheet" href="/stylesheets/introjs.css"> -->
  <!-- <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"> -->
</head>

<body>
  <section id="middlepart">
    <div class="top-section">
      <!-- defines the top-section containg the buttons for calculator,simulator,info center, scribble pad and problem map and logout -->
      <div class="row">
          <div class="col-sm-1" style="text-align:center;vertical-align:middle" >
            <div class="hoverable-image" >
            <img  src="/images/navigator-compass.png" style="max-width:50px;height:auto; margin:12px; filter: invert() drop-shadow(1px 1px 4px rgba(0,0,0,0.4))"/>
          </div>
        </div>
        <style>
          .hoverable-image:hover{
            opacity: 0.8;
            cursor: pointer;
          }

          .hoverable-image:hover::after{
          content: "Your are currently the Navigator so you have to discuss with the Driver and cannot interact with the page.";
          display: inline-block;
          left: 0px;
          top: 0px;
          padding: 5px;
          background-color: black;
          color: white;
          }
        </style>
        <div class="col-sm-6" style="text-align:center;vertical-align:middle">
          <p>MEttLE</p></div>
	   
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled id="problem1funcmodel_sim" type="image" src="/images/simulator.png" style="width:110px;height:67px;"/>
      </div>
      
    
    
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled id="problem1funcmodel_info" type="image" src="/images/info.png" style="width:110px;height:67px;"/>
      </div>
       
    
    
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled  id="problem1funcmodel_scribble"type="image" src="/images/scribble.png" style="width:110px;height:67px;"/>
      </div>
       
    
    
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled id="problem1funcmodel_map" type="image" src="/images/map.png" style="width:110px;height:67px;"/>
      </div>
       
      <div class="col-sm-1" style="text-align:center"> <button disabled id="problem1funcmodel_logout" style="margin-top: 8px;height: 50px;" type="button" class="btn btn-default" onclick="sel_logout()">Logout</button></div>
    </div>
  </div>
	
    <div class="register">
      <div class="info" style="height:70px;">
	  <div class="row">
				<div class="col-lg-8">
					<p style="padding-left:100px;text-align:center">Congratulations! You have obtained a reasonable estimate of the required power. Think of the sequence of tasks that you performed to get a reasonable estimate. Then answer the questions below.
				</p>
       </div>
       <div class="col-lg-4">  
            <p id="menuTrigger" >Problem Statement</p>
           <div id="myMenu">
           You are participating in an electric car race in which you are required to design an electric car of weight 5kg with wheel diameters of 4‚Äù that can traverse a track of 50m in less than 5 seconds. <br>Estimate the electrical power needed to achieve this performance.
          </div>
          </div>
     </div></div>
      <div class="container-fluid">
         
        <div class="col-lg-6">
          <div class="row activity" style="text-align:center">

            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2520/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="560px"
              height="560px" viewBox="-20 -5 540 540" xml:space="preserve">
              
              <rect width="500" height="500" fill="#bdbdbd" />
              
              
                 <polygon id="problem1evalfail_func" points="0,250 0,500 250,500" class="task_map" />
               <text x="15" y="400" class="task_text_eg"> What does the </text>
                  <text x="15" y="420" class="task_text_eg"> car need to do </text>
                   <text x="15" y="440" class="task_text_eg"> that requires power? </text> 
                    <text x="15" y="460" fill="green" class = "task_text_data" id="func_data"> </text>
              

              
                <polygon id="problem1evalfail_qual" points="0,0 0,250 250,500 500,500" class="task_map"/>
              <text x="40" y="250" class="task_text_eg"> What are the parameters </text>
                  <text x="40" y="270" class="task_text_eg">that will effect the dominant
                    <tspan x="60" y="290" class="task_text_eg">  mechanical power required? </tspan></text>
                     <text x="80" y="310" fill="green" class = "task_text_data" id="qual_data"> </text>
              

              
                <polygon id="problem1evalfail_quant" points="250,0 250,250 500,500 500,250" class="task_map" />
                <text x="320" y="230" class="task_text_eg"> What is equation  </text>
              <text x="320" y="250" class="task_text_eg">  connecting electric </text>
                  <text x="320" y="270" class="task_text_eg"> power required to the
                    <tspan x="320" y="290" class="task_text_eg"> dominant parameters?</tspan></text>
                     <text x="320" y="310" fill="green" class = "task_text_data" id="quant_data"> </text>
              

              
                <polygon id="problem1evalfail_calc" points="0,0 250,250 250,0" class="task_map" />
                   <text x="65" y="40" class="task_text_eg"> Substituting reasonable
                    <tspan x="70" y="60" class="task_text_eg"> values in the equation, </tspan>
                    <tspan x="85" y="80" class="task_text_eg"> what is the</tspan>
                    <tspan x="105" y="100" class="task_text_eg">  estimate of power? </tspan>
                </text>
                <text x="125" y="120" fill="green" class = "task_text_data" id="calc_data"> </text>
              
              
                <polygon id="problem1evalfail_eval" points="250,0 500,250 500,0" class="task_map" />
               <text x="360" y="40" class="task_text_eg"> Is the estimated 
                    <tspan x="360" y="60" class="task_text_eg"> value of power </tspan>
                    <tspan x="360" y="80" class="task_text_eg"> reasonable? </tspan>
                 </text>
                  <text x="360" y="100" fill="green" class = "task_text_data" id="eval_data"> </text>
                  
              
            </svg>

          </div>
        </div>
        <div class="col-lg-6" style="margin-top: 10px;">
            <div style="height:450px;width:550px;border-style: groove;">
              <div class="medium_margin subtask_text txt_left">
                1) What steps did I take to calculate the estimate? What was the goal of each step?
 <br>
                <input disabled class="medium_margin resizedTextbox" style="width:100%;margin-right:5px;" type="text" id="question0" name="question0" value="{{answerData.[0]}}"/>
               </div>
               <div class="medium_margin txt_left">
                2) Why did I need to do all these steps? How did each step contribute towards solving the problem?

 <br>
                <input disabled class="medium_margin resizedTextbox" style="width:100%;margin-right:5px;" type="text" id="question1" name="question0" value="{{answerData.[1]}}"/>
               </div>
               <div class="medium_margin txt_left">
                3) Why did I do these steps in this sequence? Could there have been a better sequence to solve the problem?
 <br>
                <input disabled class="medium_margin resizedTextbox" style="width:100%;margin-right:5px;" type="text" id="question2" name="question0" value="{{answerData.[2]}}"/>
               </div>
               <div class="medium_margin txt_left">
                4) Which was the most important step in the estimation process?
<br>
                <input disabled class="medium_margin resizedTextbox" style="width:100%;margin-right:5px;" type="text" id="question3" name="question0" value="{{answerData.[3]}}"/>
               </div>
               <div class="medium_margin txt_left">
                5) Which step can I remove from the estimation process?
<br>
                <input disabled class="medium_margin resizedTextbox" style="width:100%;margin-right:5px;" type="text" id="question4" name="question0" value="{{answerData.[4]}}"/>
               </div>
              </div>
			  <div class="medium_margin" style="width:550px">
              <button disabled style="float:right" onClick="openfrontpage();" class="btn" id="problem1evalpass_next" type="button">Submit and complete</button>
            </div>
         </div>
      </div>
  </section>
</body>
 <script src="/javascripts/vendor/jquery-2.2.1.min.js"></script>
    <script src="/javascripts/vendor/bootstrap.min.js"></script>
     <script src="/javascripts/vendor/pnotify.custom.min.js"></script>
	<script src="/javascripts/vendor/common.js">
	</script>
<script src="/socket.io/socket.io.js"></script>

<script>
var socket = io('http://10.68.6.172:8080');
var name = "{{ sessionName }}";
    // open problem statement
mnuOut=false;
$('#menuTrigger').click(function(){
  if (mnuOut){
      //Menu is visible, so HIDE menu
      $('#myMenu').animate({
        right: '-200px'
      },800);
      mnuOut = false;
  }else{
      //Menu is hidden, so SHOW menu
      $('#myMenu').animate({
        right: 0
      },800);
      mnuOut = true;
  }
}) 

var windows=[];
var bc = new BroadcastChannel('logoff_channel');
bc.onmessage =  function(event){
  if (event.data=='logoff')
  {
    sel_logout();
  }
}

window.onbeforeunload = function(){
  for(var i = 0; i < windows.length; i++){
    windows[i].close()
  }
}

$.get("/api/problem/answer", { pageID: "/problem/1/tasks/functional/evaluate/dominant", questionID: 0 })
        .done(function(data) {
          //alert( "Data Loaded: " + data );
        $("#func_data").html("' "+JSON.parse(data)[0]+"'");
  });

$.get("/api/problem/answer", { pageID: "/problem/1/tasks/qualitative/evaluate/dominant", questionID: 0 })
        .done(function(data) {
          //alert( "Data Loaded: " + data );
        $("#qual_data").html("' "+JSON.parse(data)[0]+"'");
  });

  $.get("/api/problem/answer", { pageID: "/problem/1/tasks/quantitative/evaluate/check", questionID: 1 })
        .done(function(data) {
          //alert( "Data Loaded: " + data );
        $("#quant_data").html("' "+JSON.parse(data)[0]+"'");
  });

  $.get("/api/problem/answer", { pageID: "/problem/1/tasks/calculation/calculation", questionID: 1 })
        .done(function(data) {
          //alert( "Data Loaded: " + data );
        $("#calc_data").html("' "+JSON.parse(data)[0]+"'");
  });

  $.get("/api/problem/answer", { pageID: "/problem/1/tasks/evaluation/evaluation", questionID: 2 })
        .done(function(data) {
          //alert( "Data Loaded: " + data );
          if (JSON.parse(data)[0]=="1"){
            $("#eval_data").html("Reasonable");
          }
          else
          {
            $("#eval_data").html("Not reasonable");
          }
        
  });

    $("#question0").focusout(function() {
        submiQuestion("0", $("#question0").val());
      });
      $("#question1").focusout(function() {

        submiQuestion("1", $("#question1").val());
      });

      $("#question2").focusout(function() {

        submiQuestion("2", $("#question2").val());
      });
      $("#question3").focusout(function() {

        submiQuestion("3", $("#question3").val());
      });
       $("#question4").focusout(function() {

        submiQuestion("4", $("#question4").val());
      });
      
      function submiQuestion(pk, value) {
        $.post("/api/problem/answer", { pk: pk, pageID: window.location.pathname, value: value })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
            }
            else {
              //console.log("Please try again ");
            }
          });
      }

      function openfrontpage(){
logRecordAndJump("/problem/1/problemdescrip");
  }

   function openfunc() {
         logRecordAndJump("/problem/1/tasks/role/functional/model/main")
  }

  function openqual() {
    logRecordAndJump("/problem/1/tasks/role/qualitative/model")
  }
  
  function openquant() {
    logRecordAndJump("/problem/1/tasks/role/quantitative/model")
  }
  function opencalc() {
    logRecordAndJump("/problem/1/tasks/role/calculation/calculation")
  }
  
  function openeval() {
    logRecordAndJump("/problem/1/tasks/role/evaluation/evaluation")
  }

 function sendSimulatorLog(){
   windows.push(window.open("/problem/1/tasks/navigator/simulator", '_blank'));
}

function sendInformationLog(){
  windows.push(window.open("/problem/1/tasks/navigator/information", '_blank'));
  
}

function sendScratchLog(){
  windows.push(window.open("/problem/1/tasks/navigator/scribble", '_blank'));
  
}

function sendProblemMapLog(){
  windows.push(window.open("/problem/1/tasks/navigator/aboutproblem", '_blank'));
  
}

function sel_logout(){
  for(var i = 0; i < windows.length; i++){
    windows[i].close()
  }
  //logRecord('/Logout');
  window.open("/logout", '_self');
}
  
  function logRecordAndJump(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
			  window.open(urlString.replace("role",JSON.parse(data).role), target = "_self");
            }
            else {
              //console.log("Please try again ");
            }
          });
}

function logRecordAndOpen(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
			  window.open(urlString, target = "_blank");
            }
            else {
              //console.log("Please try again ");
            }
          });
}

function logRecord(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
            }
            else {
              //console.log("Please try again ");
            }
          });
}
</script>
<script src="/javascripts/custom/map-header-socket-navigator-script.js" defer></script>
