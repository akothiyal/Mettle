<!DOCTYPE html>
<html>
<head>
	<title>Notes - MEttLE</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/stylesheets/vendor/bootstrap.min.css">
  <link rel="stylesheet" href="/stylesheets/custom/migrated.css">
   <script src="/javascripts/vendor/go.js"></script>
   <script src="/javascripts/vendor/Buttons.js"></script>
   <script src="/javascripts/vendor/jquery-2.2.1.min.js"></script>
   <link rel="stylesheet" type="text/css" href="/stylesheets/css/style.css">
  <link rel="stylesheet" href="/stylesheets/css/style-2.css">

</head>
<body>
<div class="main-body">
<div class="top-section">
      <div class="row">
             <div class="col-sm-1" style="text-align:center;vertical-align:middle" >
          <div class="hoverable-image" >
            <img  src="/images/navigator-compass.png" style="max-width:50px;height:auto; margin:12px; filter: invert() drop-shadow(1px 1px 4px rgba(0,0,0,0.4))"/>
          </div>
        </div>
        <style>
          .hoverable-image:hover{
            opacity: 0.8;
            cursor: pointer;
          }

          .hoverable-image:hover::after{
          content: "Your are currently the Navigator so you have to discuss with the Driver and cannot interact with the page.";
          display: inline-block;
          left: 0px;
          top: 0px;
          padding: 5px;
          background-color: black;
          color: white;
          }
        </style>
        <div class="col-sm-6" style="text-align:center;vertical-align:middle"> <p>MEttLE</p></div>
	    <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled id="problem1funcmodel_sim" type="image" src="/images/simulator.png" style="width:110px;height:67px;"/>
      </div>
      
    
    
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled id="problem1funcmodel_info" type="image" src="/images/info.png" style="width:110px;height:67px;"/>
      </div>
       
    
    
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled  id="problem1funcmodel_scribble"type="image" src="/images/scribbleactive.png" style="width:110px;height:67px;"/>
      </div>
       
    
    
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input disabled id="problem1funcmodel_map" type="image" src="/images/map.png" style="width:110px;height:67px;"/>
      </div>
       
      <div class="col-sm-1" style="text-align:center"> <button disabled id="problem1funcmodel_logout" style="margin-top: 8px;height: 50px;" type="button" class="btn btn-default" onclick="sel_logout()">Logout</button></div>
    </div>
  </div>
		
	
	<div class="register">
    <div class="info">
      <div class="col-lg-12">
      <p> Take notes here  </p></div>
  	</div>
	<div class="row" style="text-align:center">
  
<textarea disabled id="question0" name="wht" rows="20" cols="100"> {{answerData.[0]}} </textarea>
</div>
</div>
	</div>
</body>
</html>
 <script src="/socket.io/socket.io.js"></script>

<script>
var socket = io('http://10.68.6.172:8080');
var name = "{{ sessionName }}";

var windows=[];
var bc = new BroadcastChannel('logoff_channel');
window.onbeforeunload = function(){
  for(var i = 0; i < windows.length; i++){
    windows[i].close()
  }
}

bc.onmessage =  function(event){
  if (event.data=='logoff')
  {
    sel_logout();
  }
}

$.get("/api/problem/answer", { pageID: "/problem/1/tasks/role/scribble", questionID: 0 })
        .done(function(data) {
          //alert( "Data Loaded: " + data );
        $("#question0").html(JSON.parse(data)[0]);
  });

/*$("#question0").focusout(function() {
    submiQuestion("0",  $("#question0").val());
  });

 function submiQuestion(pk,value) {
      $.post("/api/problem/answer", { pk: pk, pageID: window.location.pathname, value: value })
        .done(function(data) {
          if (data.includes("success")) {
            //console.log("Data saved " + data);
          }
          else {
             //console.log("Please try again ");
          }
        });
    }*/

function sendInformationLog(){
  windows.push(window.open("/problem/1/tasks/Navigator/information", '_blank'));
  //logRecord('/Information')
}

function sendSimulatorLog(){
  windows.push(window.open("/problem/1/tasks/Navigator/simulator", '_blank'));
  //logRecord('/simulator')
}

function sendProblemMapLog(){
  windows.push(window.open("/problem/1/tasks/Navigator/aboutproblem", '_blank'));
  //logRecord('/Problem_Map')
}

function sel_logout(){
  bc.postMessage('logoff'); 
  for(var i = 0; i < windows.length; i++){
    windows[i].close()
  }
  //logRecord('/Logout');
  window.open("/logout", '_self');
}
  

function logRecordAndJump(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
			  window.open(urlString, target = "_self");
            }
            else {
              //console.log("Please try again ");
            }
          });
}

function logRecordAndOpen(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
			  window.open(urlString, target = "_blank");
            }
            else {
              //console.log("Please try again ");
            }
          });
}

function logRecord(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
            }
            else {
              //console.log("Please try again ");
            }
          });
}

</script>
<script src="/javascripts/custom/map-header-socket-tools-script.js"></script>

