<!DOCTYPE html>
<html>
<head>
	<title>Info Centre - MEttLE</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/stylesheets/vendor/bootstrap.min.css">
  <link rel="stylesheet" href="/stylesheets/custom/migrated.css">
   <script src="/javascripts/vendor/go.js"></script>
   <script src="/javascripts/vendor/Buttons.js"></script>
<style>
table, th, td {
    border: 1px solid black;
}
th, td {
    padding: 5px;
}
th {
    text-align: center;
}
table {
    border-spacing: 5px;
}
</style>
	</head>
<body>

<section id="middle-part">
<div class="top-section"><!-- Navigation bar containg calculator,simulator info centre,etc -->
		<div class="row">
			  <div class="col-sm-1" style="text-align:center;vertical-align:middle" >
            <div class="hoverable-image" >
            <img src="/images/steering-wheel.png" style="max-width:50px;height:auto; margin:12px; filter: invert() drop-shadow(1px 1px 4px rgba(0,0,0,0.4))"/>
          </div>
        </div>
        <style>
          .hoverable-image:hover{
            opacity: 0.8;
            cursor: pointer;
          }

          .hoverable-image:hover::after{
          content: "Your are currently the Driver so you are the one to interact with the page and submit inputs";
          display: inline-block;
          left: 0px;
          top: 0px;
          padding: 5px;
          background-color: black;
          color: white;
          }
        </style>
		 <div class="col-sm-6" style="text-align:center;vertical-align:middle"> <p>MEttLE</p> </div>
       
	  <g onclick="sendSimulatorLog()"> 
		  <div class="col-sm-1" style="text-align:center;vertical-align:middle">
			  <input id="problem1map_sim" type="image" src="/images/simulator.png" style="width:110px;height:67px;"/>
		  </div>
	   </g> 
	  
	  <div class="col-sm-1" style="text-align:center;vertical-align:middle">
       <image id="problem1map_info" type="image" src="/images/infoactiveng.png" style="width:110px;height:67px;"/></a>
      </div>
	   		
	  <g onclick="sendScratchLog()"> 
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input  id="problem1map_scribble"type="image" src="/images/scribble.png" style="width:110px;height:67px;"/>
      </div>
	    </g> 
		
	  <g onclick="sendProblemMapLog()"> 
      <div class="col-sm-1" style="text-align:center;vertical-align:middle">
        <input id="problem1map_map" type="image" src="/images/map.png" style="width:110px;height:67px;"/>
      </div>
	    </g> 
		
      <div class="col-sm-1" style="text-align:center"> <button id="problem1map_logout" style="margin-top: 8px;height: 50px;" type="button" class="btn btn-default" onclick="sel_logout()">Logout</button></div>
    </div>
	</div>
	<div class="register">
     <div class="info">
     	<div class="col-lg-12">
      <p> Find information and numerical values that may help you solve the problem here </p></div>
	  </div>

<div class="row activity">

	<div class="col-lg-6" style="text-align:center;vertical-align:middle">
	<h4 style="font-weight:bold"> About an electric car </h4>
		<a href="#" onclick="openpdf()"><input id="info_doc" type="image" src="/images/read.png" style="width:100px;height:100px;"/></a> <br>
	
		
		<h4 style="font-weight:bold"> Typical Drag Coefficients </h4>
		<table style="width:80%; align:center">
		<tr>
		<tr> <th> Automobile </th> <th> Shape Factor (Cd) </th> </tr>
		<tr> <td> Jaguar XE</td> <td> 0.26 </td> </tr>
		<tr> <td> Mini Cooper </td> <td> 0.35 </td> </tr>
		<tr> <td> Toyota Truck </td> <td> 0.44 </td> </tr>
		<tr> <td> Mercedes Benz G class </td> <td> 0.54 </td> </tr>
		<tr> <td> Hummer H2	 </td> <td> 0.57 </td> </tr>
		<tr> <td> Typical values for formula one cars </td> <td> 0.7-1.1 </td> </tr>
</table>
</div>
		<div class="col-lg-6" style="text-align:center;vertical-align:middle">
			
			<h4 style="font-weight:bold; text-align: left"> Typical Power Consumption of Some Common Appliances and Vehicles </h4>
		<table style="width:90%;align:center">
		<tr>
		<tr> <th> Appliance/Vehicle </th> <th> Power Consumption (Watts) </th> </tr>
		<tr> <td> Tablet Charger </td> <td> 10-15W </td> </tr>
		<tr> <td> 10kg toy car for kids </td> <td> 20W </td> </tr>
		<tr> <td> Laptop Computer </td> <td> 50-100W </td> </tr>
		<tr> <td> 100W Incandescent light bulb </td> <td> 100W </td> </tr>
		<tr> <td> 25" colour TV </td> <td>	150W </td> </tr>
		<tr> <td> Blender </td> <td> 300-400W </td> </tr>
		<tr> <td> Electric Kettle </td> <td> 1200 - 3000W </td> </tr>
		<tr> <td> 1000kg car on the highway </td> <td> 80-100KW </td></tr>
<tr> <td> Small propeller aircraft (25000kg) at takeoff </td> <td> 3-4MW </td></tr>	
<tr> <td> Boeing 747 (370000kg) at takeoff </td> <td> 90MW </td></tr>
</table>
</div>
</div>
</div>	
	</section>
</body>
</html>

<script src="/socket.io/socket.io.js"></script>

<script>
var socket = io('http://10.68.6.172:8080');
var name = "{{ sessionName }}";
//window.onclose = socket.emit('Driver-close-window',{text:name});

var windows=[];
var bc = new BroadcastChannel('logoff_channel');
window.onbeforeunload = function(){
  for(var i = 0; i < windows.length; i++){
    windows[i].close()
  }
}

bc.onmessage = function (event) {
    if (event.data == 'logoff') {
      sel_logout();
    }
  }

function sendSimulatorLog(){
	socket.emit('Driver-simulator', {
      text: name
    });
  windows.push(window.open("/problem/1/tasks/Driver/simulator", '_blank'));
  logRecord('/simulator');
}

function sendScratchLog(){
	 socket.emit('Driver-scratch', {
      text: name
    });
  windows.push(window.open("/problem/1/tasks/Driver/scribble", '_blank'));
  logRecord('/scribble')
}

function sendProblemMapLog(){
	socket.emit('Driver-problem-map', {
      text: name
    });
  windows.push(window.open("/problem/1/tasks/Driver/aboutproblem", '_blank'));
  logRecord('/Problem_Map')
}

function sel_logout(){
	socket.emit('Driver-logout', {
      text: name
    });
  bc.postMessage('logoff'); 
  for(var i = 0; i < windows.length; i++){
    windows[i].close()
  }
  logRecord('/Logout');
  window.open("/logout", '_self');
}

function openpdf()
{
	socket.emit('Driver-information-doc', {
      text: name
    });
	window.open('/documents/motor_ref.pdf', '_self'); 
	//return false;
}


function logRecord(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
            }
            else {
              //console.log("Please try again ");
            }
          });
} 


function logRecordAndJump(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
			  window.open(urlString, target = "_self");
            }
            else {
              //console.log("Please try again ");
            }
          });
}

function logRecordAndOpen(urlString){
	$.post("/api/problem/log", {pageID: window.location.pathname, value: urlString })
          .done(function(data) {
            if (data.includes("success")) {
              //console.log("Data saved ");
			  window.open(urlString, target = "_blank");
            }
            else {
              //console.log("Please try again ");
            }
          });
}
</script>
